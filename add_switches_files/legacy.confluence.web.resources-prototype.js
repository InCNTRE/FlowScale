var Prototype={Version:"1.4.0_pre11",emptyFunction:function(){},K:function(A){return A}};var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};var Abstract=new Object();Object.extend=function(A,B){for(property in B){A[property]=B[property]}return A};Object.inspect=function(A){try{if(A==undefined){return"undefined"}if(A==null){return"null"}return A.inspect?A.inspect():A.toString()}catch(B){if(B instanceof RangeError){return"..."}throw B}};Function.prototype.bind=function(B){var A=this;return function(){return A.apply(B,arguments)}};Function.prototype.bindAsEventListener=function(B){var A=this;return function(C){return A.call(B,C||window.event)}};Object.extend(Number.prototype,{toColorPart:function(){var A=this.toString(16);if(this<16){return"0"+A}return A},succ:function(){return this+1},times:function(A){$R(0,this,true).each(A);return this}});var Try={these:function(){var C;for(var B=0;B<arguments.length;B++){var A=arguments[B];try{C=A();break}catch(D){}}return C}};var PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(B,A){this.callback=B;this.frequency=A;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback()}finally{this.currentlyExecuting=false}}}};function $(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.getElementById(A)}if(arguments.length==1){return A}C.push(A)}return C}Object.extend(String.prototype,{stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(){var B=document.createElement("div");var A=document.createTextNode(this);B.appendChild(A);return B.innerHTML},unescapeHTML:function(){var A=document.createElement("div");A.innerHTML=this.stripTags();return A.childNodes[0]?A.childNodes[0].nodeValue:""},toQueryParams:function(){var A=this.match(/^\??(.*)$/)[1].split("&");return A.inject({},function(D,B){var C=B.split("=");D[C[0]]=C[1];return D})},inspect:function(){return"'"+this.replace("\\","\\\\").replace("'","\\'")+"'"}});String.prototype.parseQuery=String.prototype.toQueryParams;var $break=new Object();var $continue=new Object();var Enumerable={each:function(B){var A=0;try{this._each(function(D){try{B(D,A++)}catch(E){if(E!=$continue){throw E}}})}catch(C){if(C!=$break){throw C}}},all:function(B){var A=true;this.each(function(D,C){if(!(A&=(B||Prototype.K)(D,C))){throw $break}});return A},any:function(B){var A=true;this.each(function(D,C){if(A&=(B||Prototype.K)(D,C)){throw $break}});return A},collect:function(B){var A=[];this.each(function(D,C){A.push(B(D,C))});return A},detect:function(B){var A;this.each(function(D,C){if(B(D,C)){A=D;throw $break}});return A},findAll:function(B){var A=[];this.each(function(D,C){if(B(D,C)){A.push(D)}});return A},grep:function(C,B){var A=[];this.each(function(F,E){var D=F.toString();if(D.match(C)){A.push((B||Prototype.K)(F,E))}});return A},include:function(A){var B=false;this.each(function(C){if(C==A){B=true;throw $break}});return B},inject:function(A,B){this.each(function(D,C){A=B(A,D,C)});return A},invoke:function(B){var A=$A(arguments).slice(1);return this.collect(function(C){return C[B].apply(C,A)})},max:function(B){var A;this.each(function(D,C){D=(B||Prototype.K)(D,C);if(D>=(A||D)){A=D}});return A},min:function(B){var A;this.each(function(D,C){D=(B||Prototype.K)(D,C);if(D<=(A||D)){A=D}});return A},partition:function(C){var B=[],A=[];this.each(function(E,D){((C||Prototype.K)(E,D)?B:A).push(E)});return[B,A]},pluck:function(B){var A=[];this.each(function(D,C){A.push(D[B])});return A},reject:function(B){var A=[];this.each(function(D,C){if(!B(D,C)){A.push(D)}});return A},sortBy:function(A){return this.collect(function(C,B){return{value:C,criteria:A(C,B)}}).sort(function(E,D){var C=E.criteria,B=D.criteria;return C<B?-1:C>B?1:0}).pluck("value")},toArray:function(){return this.collect(Prototype.K)},zip:function(){var B=Prototype.K,A=$A(arguments);if(typeof A.last()=="function"){B=A.pop()}var C=[this].concat(A).map($A);return this.map(function(E,D){B(E=C.pluck(D));return E})},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});var $A=Array.from=function(C){if(C.toArray){return C.toArray()}else{var B=[];for(var A=0;A<C.length;A++){B.push(C[A])}return B}};Object.extend(Array.prototype,Enumerable);Object.extend(Array.prototype,{_each:function(B){for(var A=0;A<this.length;A++){B(this[A])}},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(A){return A!=undefined||A!=null})},flatten:function(){return this.inject([],function(B,A){return B.concat(A.constructor==Array?A.flatten():[A])})},without:function(){var A=$A(arguments);return this.select(function(B){return !A.include(B)})},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}});var Hash={_each:function(A){for(key in this){var B=this[key];if(typeof B=="function"){continue}var C=[key,B];C.key=key;C.value=B;A(C)}},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},merge:function(A){return $H(A).inject($H(this),function(B,C){B[C.key]=C.value;return B})},toQueryString:function(){return this.map(function(A){return A.map(encodeURIComponent).join("=")}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(A){return A.map(Object.inspect).join(": ")}).join(", ")+"}>"}};function $H(A){var B=Object.extend({},A||{});Object.extend(B,Enumerable);Object.extend(B,Hash);return B}var Range=Class.create();Object.extend(Range.prototype,Enumerable);Object.extend(Range.prototype,{initialize:function(C,A,B){this.start=C;this.end=A;this.exclusive=B},_each:function(A){var B=this.start;do{A(B);B=B.succ()}while(this.include(B))},include:function(A){if(A<this.start){return false}if(this.exclusive){return A<this.end}return A<=this.end}});var $R=function(C,A,B){return new Range(C,A,B)};var Ajax={getTransport:function(){return Try.these(function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new XMLHttpRequest()})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(A){this.responders._each(A)},register:function(A){if(!this.include(A)){this.responders.push(A)}},unregister:function(A){this.responders=this.responders.without(A)},dispatch:function(D,B,C,A){this.each(function(E){if(E[D]&&typeof E[D]=="function"){try{E[D].apply(E,[B,C,A])}catch(F){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=function(){};Ajax.Base.prototype={setOptions:function(A){this.options={method:"post",asynchronous:true,parameters:""};Object.extend(this.options,A||{})},responseIsSuccess:function(){return this.transport.status==undefined||this.transport.status==0||(this.transport.status>=200&&this.transport.status<300)},responseIsFailure:function(){return !this.responseIsSuccess()}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Request.prototype=Object.extend(new Ajax.Base(),{initialize:function(B,A){this.transport=Ajax.getTransport();this.setOptions(A);this.request(B)},request:function(B){var C=this.options.parameters||"";if(C.length>0){C+="&_="}try{this.url=B;if(this.options.method=="get"){this.url+="?"+C}Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.options.method,this.url,this.options.asynchronous);if(this.options.asynchronous){this.transport.onreadystatechange=this.onStateChange.bind(this);setTimeout((function(){this.respondToReadyState(1)}).bind(this),10)}this.setRequestHeaders();var A=this.options.postBody?this.options.postBody:C;this.transport.send(this.options.method=="post"?A:null)}catch(D){}},setRequestHeaders:function(){var B=["X-Requested-With","XMLHttpRequest","X-Prototype-Version",Prototype.Version];if(this.options.method=="post"){B.push("Content-type","application/x-www-form-urlencoded");if(this.transport.overrideMimeType){B.push("Connection","close")}}if(this.options.requestHeaders){B.push.apply(B,this.options.requestHeaders)}for(var A=0;A<B.length;A+=2){this.transport.setRequestHeader(B[A],B[A+1])}},onStateChange:function(){var A=this.transport.readyState;if(A!=1){this.respondToReadyState(this.transport.readyState)}},evalJSON:function(){try{var json=this.transport.getResponseHeader("X-JSON"),object;object=eval(json);return object}catch(e){}},respondToReadyState:function(A){var C=Ajax.Request.Events[A];var D=this.transport,B=this.evalJSON();if(C=="Complete"){(this.options["on"+this.transport.status]||this.options["on"+(this.responseIsSuccess()?"Success":"Failure")]||Prototype.emptyFunction)(D,B)}(this.options["on"+C]||Prototype.emptyFunction)(D,B);Ajax.Responders.dispatch("on"+C,this,D,B);if(C=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}}});Ajax.Updater=Class.create();Ajax.Updater.ScriptFragment="(?:<script.*?>)((\n|.)*?)(?:<\/script>)";Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(A,C,B){this.containers={success:A.success?$(A.success):$(A),failure:A.failure?$(A.failure):(A.success?null:$(A))};this.transport=Ajax.getTransport();this.setOptions(B);var D=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(F,E){this.updateContent();D(F,E)}).bind(this);this.request(C)},updateContent:function(){var receiver=this.responseIsSuccess()?this.containers.success:this.containers.failure;var match=new RegExp(Ajax.Updater.ScriptFragment,"img");var response=this.transport.responseText.replace(match,"");var scripts=this.transport.responseText.match(match);if(receiver){if(this.options.insertion){new this.options.insertion(receiver,response)}else{receiver.innerHTML=response}}if(this.responseIsSuccess()){if(this.onComplete){setTimeout(this.onComplete.bind(this),10)}}if(this.options.evalScripts&&scripts){match=new RegExp(Ajax.Updater.ScriptFragment,"im");setTimeout((function(){for(var i=0;i<scripts.length;i++){eval(scripts[i].match(match)[1])}}).bind(this),10)}}});Ajax.PeriodicalUpdater=Class.create();Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base(),{initialize:function(A,C,B){this.setOptions(B);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=1;this.updater={};this.container=A;this.url=C;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Ajax.emptyFunction).apply(this,arguments)},updateComplete:function(A){if(this.options.decay){this.decay=(A.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=A.responseText}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1000)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});if(!window.Element){var Element=new Object()}Object.extend(Element,{visible:function(A){return $(A).style.display!="none"},toggle:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);Element[Element.visible(A)?"show":"hide"](A)}},hide:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);A.style.display="none"}},show:function(){for(var B=0;B<arguments.length;B++){var A=$(arguments[B]);A.style.display=""}},remove:function(A){A=$(A);A.parentNode.removeChild(A)},getHeight:function(A){A=$(A);return A.offsetHeight},classNames:function(A){return new Element.ClassNames(A)},hasClassName:function(A,B){if(!(A=$(A))){return }return Element.classNames(A).include(B)},addClassName:function(A,B){if(!(A=$(A))){return }return Element.classNames(A).add(B)},removeClassName:function(A,B){if(!(A=$(A))){return }return Element.classNames(A).remove(B)},cleanWhitespace:function(B){B=$(B);for(var A=0;A<B.childNodes.length;A++){var C=B.childNodes[A];if(C.nodeType==3&&!/\S/.test(C.nodeValue)){Element.remove(C)}}},empty:function(A){return $(A).innerHTML.match(/^\s*$/)},scrollTo:function(B){B=$(B);var A=B.x?B.x:B.offsetLeft,C=B.y?B.y:B.offsetTop;window.scrollTo(A,C)}});var Toggle=new Object();Toggle.display=Element.toggle;Abstract.Insertion=function(A){this.adjacency=A};Abstract.Insertion.prototype={initialize:function(A,B){this.element=$(A);this.content=B;if(this.adjacency&&this.element.insertAdjacentHTML){try{this.element.insertAdjacentHTML(this.adjacency,this.content)}catch(C){if(this.element.tagName.toLowerCase()=="tbody"){this.fragment=this.contentFromAnonymousTable();this.insertContent()}else{throw C}}}else{this.range=this.element.ownerDocument.createRange();if(this.initializeRange){this.initializeRange()}this.fragment=this.range.createContextualFragment(this.content);this.insertContent()}},contentFromAnonymousTable:function(){var A=document.createElement("div");A.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return A.childNodes[0].childNodes[0].childNodes[0]}};var Insertion=new Object();Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element)},insertContent:function(){this.element.parentNode.insertBefore(this.fragment,this.element)}});Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true)},insertContent:function(){this.element.insertBefore(this.fragment,this.element.firstChild)}});Insertion.Bottom=Class.create();Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element)},insertContent:function(){this.element.appendChild(this.fragment)}});Insertion.After=Class.create();Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element)},insertContent:function(){this.element.parentNode.insertBefore(this.fragment,this.element.nextSibling)}});Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(A){this.element=$(A)},_each:function(A){this.element.className.split(/\s+/).select(function(B){return B.length>0})._each(A)},set:function(A){this.element.className=A},add:function(A){if(this.include(A)){return }this.set(this.toArray().concat(A).join(" "))},remove:function(A){if(!this.include(A)){return }this.set(this.select(function(B){return B!=A}))},toString:function(){return this.toArray().join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);var Field={clear:function(){for(var A=0;A<arguments.length;A++){$(arguments[A]).value=""}},focus:function(A){$(A).focus()},present:function(){for(var A=0;A<arguments.length;A++){if($(arguments[A]).value==""){return false}}return true},select:function(A){$(A).select()},activate:function(A){$(A).focus();$(A).select()}};var Form={serialize:function(D){var E=Form.getElements($(D));var C=new Array();for(var B=0;B<E.length;B++){var A=Form.Element.serialize(E[B]);if(A){C.push(A)}}return C.join("&")},getElements:function(B){var B=$(B);var C=new Array();for(tagName in Form.Element.Serializers){var D=B.getElementsByTagName(tagName);for(var A=0;A<D.length;A++){C.push(D[A])}}return C},getInputs:function(F,C,D){var F=$(F);var A=F.getElementsByTagName("input");if(!C&&!D){return A}var G=new Array();for(var E=0;E<A.length;E++){var B=A[E];if((C&&B.type!=C)||(D&&B.name!=D)){continue}G.push(B)}return G},disable:function(C){var D=Form.getElements(C);for(var B=0;B<D.length;B++){var A=D[B];A.blur();A.disabled="true"}},enable:function(C){var D=Form.getElements(C);for(var B=0;B<D.length;B++){var A=D[B];A.disabled=""}},focusFirstElement:function(C){var C=$(C);var D=Form.getElements(C);for(var B=0;B<D.length;B++){var A=D[B];if(A.type!="hidden"&&!A.disabled){Field.activate(A);break}}},reset:function(A){$(A).reset()}};Form.Element={serialize:function(A){var A=$(A);var C=A.tagName.toLowerCase();var B=Form.Element.Serializers[C](A);if(B){return encodeURIComponent(B[0])+"="+encodeURIComponent(B[1])}},getValue:function(A){var A=$(A);var C=A.tagName.toLowerCase();var B=Form.Element.Serializers[C](A);if(B){return B[1]}}};Form.Element.Serializers={input:function(A){switch(A.type.toLowerCase()){case"submit":case"hidden":case"password":case"text":return Form.Element.Serializers.textarea(A);case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(A)}return false},inputSelector:function(A){if(A.checked){return[A.name,A.value]}},textarea:function(A){return[A.name,A.value]},select:function(A){return Form.Element.Serializers[A.type=="select-one"?"selectOne":"selectMany"](A)},selectOne:function(C){var D="",B,A=C.selectedIndex;if(A>=0){B=C.options[A];D=B.value;if(!D&&!("value" in B)){D=B.text}}return[C.name,D]},selectMany:function(C){var D=new Array();for(var B=0;B<C.length;B++){var A=C.options[B];if(A.selected){var E=A.value;if(!E&&!("value" in A)){E=A.text}D.push(E)}}return[C.name,D]}};var $F=Form.Element.getValue;Abstract.TimedObserver=function(){};Abstract.TimedObserver.prototype={initialize:function(A,B,C){this.frequency=B;this.element=$(A);this.callback=C;this.lastValue=this.getValue();this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},onTimerEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}}};Form.Element.Observer=Class.create();Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=function(){};Abstract.EventObserver.prototype={initialize:function(A,B){this.element=$(A);this.callback=B;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}},registerFormCallbacks:function(){var B=Form.getElements(this.element);for(var A=0;A<B.length;A++){this.registerCallback(B[A])}},registerCallback:function(A){if(A.type){switch(A.type.toLowerCase()){case"checkbox":case"radio":A.target=this;A.prev_onclick=A.onclick||Prototype.emptyFunction;A.onclick=function(){this.prev_onclick();this.target.onElementEvent()};break;case"password":case"text":case"textarea":case"select-one":case"select-multiple":A.target=this;A.prev_onchange=A.onchange||Prototype.emptyFunction;A.onchange=function(){this.prev_onchange();this.target.onElementEvent()};break}}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.serialize(this.element)}});if(!window.Event){var Event=new Object()}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(A){return A.target||A.srcElement},isLeftClick:function(A){return(((A.which)&&(A.which==1))||((A.button)&&(A.button==1)))},pointerX:function(A){return A.pageX||(A.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(A){return A.pageY||(A.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(A){if(A.preventDefault){A.preventDefault();A.stopPropagation()}else{A.returnValue=false;A.cancelBubble=true}},findElement:function(C,B){var A=Event.element(C);while(A.parentNode&&(!A.tagName||(A.tagName.toUpperCase()!=B.toUpperCase()))){A=A.parentNode}return A},observers:false,_observeAndCache:function(D,C,B,A){if(!this.observers){this.observers=[]}if(D.addEventListener){this.observers.push([D,C,B,A]);D.addEventListener(C,B,A)}else{if(D.attachEvent){this.observers.push([D,C,B,A]);D.attachEvent("on"+C,B)}}},unloadCache:function(){if(!Event.observers){return }for(var A=0;A<Event.observers.length;A++){Event.stopObserving.apply(this,Event.observers[A]);Event.observers[A][0]=null}Event.observers=false},observe:function(D,C,B,A){var D=$(D);A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.attachEvent)){C="keydown"}this._observeAndCache(D,C,B,A)},stopObserving:function(D,C,B,A){var D=$(D);A=A||false;if(C=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||D.detachEvent)){C="keydown"}if(D.removeEventListener){D.removeEventListener(C,B,A)}else{if(D.detachEvent){D.detachEvent("on"+C,B)}}}});Event.observe(window,"unload",Event.unloadCache,false);var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},realOffset:function(B){var A=0,C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return[C,A]},cumulativeOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return[C,A]},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=this.cumulativeOffset(B);return(C>=this.offset[1]&&C<this.offset[1]+B.offsetHeight&&A>=this.offset[0]&&A<this.offset[0]+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=this.realOffset(B);this.xcomp=A+C[0]-this.deltaX;this.ycomp=D+C[1]-this.deltaY;this.offset=this.cumulativeOffset(B);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+B.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth}},clone:function(B,C){B=$(B);C=$(C);C.style.position="absolute";var A=this.cumulativeOffset(B);C.style.top=A[1]+"px";C.style.left=A[0]+"px";C.style.width=B.offsetWidth+"px";C.style.height=B.offsetHeight+"px"}};
var Effect={tagifyText:function(A){var B="position:relative";if(/MSIE/.test(navigator.userAgent)){B+=";zoom:1"}A=$(A);$A(A.childNodes).each(function(C){if(C.nodeType==3){C.nodeValue.toArray().each(function(D){A.insertBefore(Builder.node("span",{style:B},D==" "?String.fromCharCode(160):D),C)});Element.remove(C)}})},multiple:function(C,D){var F;if(((typeof C=="object")||(typeof C=="function"))&&(C.length)){F=C}else{F=$(C).childNodes}var B=Object.extend({speed:0.1,delay:0},arguments[2]||{});var E=B.speed;var A=B.delay;$A(F).each(function(H,G){new D(H,Object.extend(B,{delay:A+G*E}))})}};var Effect2=Effect;Effect.Transitions={};Effect.Transitions.linear=function(A){return A};Effect.Transitions.sinoidal=function(A){return(-Math.cos(A*Math.PI)/2)+0.5};Effect.Transitions.reverse=function(A){return 1-A};Effect.Transitions.flicker=function(A){return((-Math.cos(A*Math.PI)/4)+0.75)+Math.random()/4};Effect.Transitions.wobble=function(A){return(-Math.cos(A*Math.PI*(9*A))/2)+0.5};Effect.Transitions.pulse=function(A){return(Math.floor(A*10)%2==0?(A*10-Math.floor(A*10)):1-(A*10-Math.floor(A*10)))};Effect.Transitions.none=function(A){return 0};Effect.Transitions.full=function(A){return 1};Effect.Queue={effects:[],interval:null,add:function(A){var B=new Date().getTime();switch(A.options.queue){case"front":this.effects.findAll(function(C){return C.state=="idle"}).each(function(C){C.startOn+=A.finishOn;C.finishOn+=A.finishOn});break;case"end":B=this.effects.pluck("finishOn").max()||B;break}A.startOn+=B;A.finishOn+=B;this.effects.push(A);if(!this.interval){this.interval=setInterval(this.loop.bind(this),40)}},remove:function(A){this.effects=this.effects.reject(function(B){return B==A});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var A=new Date().getTime();this.effects.invoke("loop",A)}};Effect.Base=function(){};Effect.Base.prototype={position:null,setOptions:function(A){this.options=Object.extend({transition:Effect.Transitions.sinoidal,duration:1,fps:25,sync:false,from:0,to:1,delay:0,queue:"parallel"},A||{})},start:function(A){this.setOptions(A||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.event("beforeStart");if(!this.options.sync){Effect.Queue.add(this)}},loop:function(C){if(C>=this.startOn){if(C>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return }var B=(C-this.startOn)/(this.finishOn-this.startOn);var A=Math.round(B*this.options.fps*this.options.duration);if(A>this.currentFrame){this.render(B);this.currentFrame=A}}},render:function(A){if(this.state=="idle"){this.state="running";this.event("beforeSetup");if(this.setup){this.setup()}this.event("afterSetup")}if(this.options.transition){A=this.options.transition(A)}A*=(this.options.to-this.options.from);A+=this.options.from;this.position=A;this.event("beforeUpdate");if(this.update){this.update(A)}this.event("afterUpdate")},cancel:function(){if(!this.options.sync){Effect.Queue.remove(this)}this.state="finished"},event:function(A){if(this.options[A+"Internal"]){this.options[A+"Internal"](this)}if(this.options[A]){this.options[A](this)}}};Effect.Parallel=Class.create();Object.extend(Object.extend(Effect.Parallel.prototype,Effect.Base.prototype),{initialize:function(A){this.effects=A||[];this.start(arguments[1])},update:function(A){this.effects.invoke("render",A)},finish:function(A){this.effects.each(function(B){B.render(1);B.cancel();B.event("beforeFinish");if(B.finish){B.finish(A)}B.event("afterFinish")})}});Effect.Opacity=Class.create();Object.extend(Object.extend(Effect.Opacity.prototype,Effect.Base.prototype),{initialize:function(B){this.element=$(B);if(/MSIE/.test(navigator.userAgent)&&(!this.element.hasLayout)){this.element.style.zoom=1}var A=Object.extend({from:Element.getOpacity(this.element)||0,to:1},arguments[1]||{});this.start(A)},update:function(A){Element.setOpacity(this.element,A)}});Effect.MoveBy=Class.create();Object.extend(Object.extend(Effect.MoveBy.prototype,Effect.Base.prototype),{initialize:function(B,A,C){this.element=$(B);this.toTop=A;this.toLeft=C;this.start(arguments[3])},setup:function(){Element.makePositioned(this.element);this.originalTop=parseFloat(Element.getStyle(this.element,"top")||"0");this.originalLeft=parseFloat(Element.getStyle(this.element,"left")||"0")},update:function(A){var C=this.toTop*A+this.originalTop;var B=this.toLeft*A+this.originalLeft;this.setPosition(C,B)},setPosition:function(B,A){this.element.style.top=B+"px";this.element.style.left=A+"px"}});Effect.Scale=Class.create();Object.extend(Object.extend(Effect.Scale.prototype,Effect.Base.prototype),{initialize:function(B,C){this.element=$(B);var A=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:C},arguments[2]||{});this.start(A)},setup:function(){var A=this;this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=Element.getStyle(this.element,"position");A.originalStyle={};["top","left","width","height","fontSize"].each(function(C){A.originalStyle[C]=A.element.style[C]});this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var B=Element.getStyle(this.element,"font-size")||"100%";["em","px","%"].each(function(C){if(B.indexOf(C)>0){A.fontSize=parseFloat(B);A.fontSizeType=C}});this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.clientHeight,this.element.clientWidth]}if(this.options.scaleMode=="content"){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(A){var B=(this.options.scaleFrom/100)+(this.factor*A);if(this.options.scaleContent&&this.fontSize){this.element.style.fontSize=this.fontSize*B+this.fontSizeType}this.setDimensions(this.dims[0]*B,this.dims[1]*B)},finish:function(A){if(this.restoreAfterFinish){var B=this;["top","left","width","height","fontSize"].each(function(C){B.element.style[C]=B.originalStyle[C]})}},setDimensions:function(A,E){var D=this.element.style;if(this.options.scaleX){D.width=E+"px"}if(this.options.scaleY){D.height=A+"px"}if(this.options.scaleFromCenter){var C=(A-this.dims[0])/2;var B=(E-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){D.top=this.originalTop-C+"px"}if(this.options.scaleX){D.left=this.originalLeft-B+"px"}}else{if(this.options.scaleY){D.top=-C+"px"}if(this.options.scaleX){D.left=-B+"px"}}}}});Effect.Highlight=Class.create();Object.extend(Object.extend(Effect.Highlight.prototype,Effect.Base.prototype),{initialize:function(B){this.element=$(B);var A=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(A)},setup:function(){this.oldBgImage=this.element.style.backgroundImage;this.element.style.backgroundImage="none";if(!this.options.endcolor){this.options.endcolor=Element.getStyle(this.element,"background-color").parseColor("#ffffff")}if(typeof this.options.restorecolor=="undefined"){this.options.restorecolor=this.element.style.backgroundColor}this.colors_base=[parseInt(this.options.startcolor.slice(1,3),16),parseInt(this.options.startcolor.slice(3,5),16),parseInt(this.options.startcolor.slice(5),16)];this.colors_delta=[parseInt(this.options.endcolor.slice(1,3),16)-this.colors_base[0],parseInt(this.options.endcolor.slice(3,5),16)-this.colors_base[1],parseInt(this.options.endcolor.slice(5),16)-this.colors_base[2]]},update:function(A){var C=this;var B=$R(0,2).map(function(D){return Math.round(C.colors_base[D]+(C.colors_delta[D]*A))});this.element.style.backgroundColor="#"+B[0].toColorPart()+B[1].toColorPart()+B[2].toColorPart()},finish:function(){this.element.style.backgroundColor=this.options.restorecolor;this.element.style.backgroundImage=this.oldBgImage}});Effect.ScrollTo=Class.create();Object.extend(Object.extend(Effect.ScrollTo.prototype,Effect.Base.prototype),{initialize:function(A){this.element=$(A);this.start(arguments[1]||{})},setup:function(){Position.prepare();var B=Position.cumulativeOffset(this.element);var A=window.innerHeight?window.height-window.innerHeight:document.body.scrollHeight-(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);this.scrollStart=Position.deltaY;this.delta=(B[1]>A?A:B[1])-this.scrollStart},update:function(A){Position.prepare();window.scrollTo(Position.deltaX,this.scrollStart+(A*this.delta))}});Effect.Fade=function(C){var A=Element.getInlineOpacity(C);var B=Object.extend({from:Element.getOpacity(C)||1,to:0,afterFinishInternal:function(D){if(D.options.to==0){Element.hide(D.element);Element.setInlineOpacity(D.element,A)}}},arguments[1]||{});return new Effect.Opacity(C,B)};Effect.Appear=function(B){var A=Object.extend({from:(Element.getStyle(B,"display")=="none"?0:Element.getOpacity(B)||0),to:1,beforeSetup:function(C){Element.setOpacity(C.element,C.options.from);Element.show(C.element)}},arguments[1]||{});return new Effect.Opacity(B,A)};Effect.Puff=function(B){B=$(B);var A=Element.getInlineOpacity(B);var C=B.style.position;return new Effect.Parallel([new Effect.Scale(B,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(D){D.effects[0].element.style.position="absolute"},afterFinishInternal:function(D){Element.hide(D.effects[0].element);D.effects[0].element.style.position=C;Element.setInlineOpacity(D.effects[0].element,A)}},arguments[1]||{}))};Effect.BlindUp=function(A){A=$(A);Element.makeClipping(A);return new Effect.Scale(A,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(B){Element.hide(B.element);Element.undoClipping(B.element)}},arguments[1]||{}))};Effect.BlindDown=function(B){B=$(B);var C=B.style.height;var A=Element.getDimensions(B);return new Effect.Scale(B,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:A.height,originalWidth:A.width},restoreAfterFinish:true,afterSetup:function(D){Element.makeClipping(D.element);D.element.style.height="0px";Element.show(D.element)},afterFinishInternal:function(D){Element.undoClipping(D.element);D.element.style.height=C}},arguments[1]||{}))};Effect.SwitchOff=function(B){B=$(B);var A=Element.getInlineOpacity(B);return new Effect.Appear(B,{duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(C){new Effect.Scale(C.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(D){Element.makePositioned(D.element);Element.makeClipping(D.element)},afterFinishInternal:function(D){Element.hide(D.element);Element.undoClipping(D.element);Element.undoPositioned(D.element);Element.setInlineOpacity(D.element,A)}})}})};Effect.DropOut=function(C){C=$(C);var A=C.style.top;var D=C.style.left;var B=Element.getInlineOpacity(C);return new Effect.Parallel([new Effect.MoveBy(C,100,0,{sync:true}),new Effect.Opacity(C,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(E){Element.makePositioned(E.effects[0].element)},afterFinishInternal:function(E){Element.hide(E.effects[0].element);Element.undoPositioned(E.effects[0].element);E.effects[0].element.style.left=D;E.effects[0].element.style.top=A;Element.setInlineOpacity(E.effects[0].element,B)}},arguments[1]||{}))};Effect.Shake=function(B){B=$(B);var A=B.style.top;var C=B.style.left;return new Effect.MoveBy(B,0,20,{duration:0.05,afterFinishInternal:function(D){new Effect.MoveBy(D.element,0,-40,{duration:0.1,afterFinishInternal:function(E){new Effect.MoveBy(E.element,0,40,{duration:0.1,afterFinishInternal:function(F){new Effect.MoveBy(F.element,0,-40,{duration:0.1,afterFinishInternal:function(G){new Effect.MoveBy(G.element,0,40,{duration:0.1,afterFinishInternal:function(H){new Effect.MoveBy(H.element,0,-20,{duration:0.05,afterFinishInternal:function(I){Element.undoPositioned(I.element);I.element.style.left=C;I.element.style.top=A}})}})}})}})}})}})};Effect.SlideDown=function(C){C=$(C);Element.cleanWhitespace(C);var A=C.firstChild.style.bottom;var B=Element.getDimensions(C);return new Effect.Scale(C,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){Element.makePositioned(D.element.firstChild);if(window.opera){D.element.firstChild.style.top=""}Element.makeClipping(D.element);C.style.height="0";Element.show(C)},afterUpdateInternal:function(D){D.element.firstChild.style.bottom=(D.originalHeight-D.element.clientHeight)+"px"},afterFinishInternal:function(D){Element.undoClipping(D.element);Element.undoPositioned(D.element.firstChild);D.element.firstChild.style.bottom=A}},arguments[1]||{}))};Effect.SlideUp=function(B){B=$(B);Element.cleanWhitespace(B);var A=B.firstChild.style.bottom;return new Effect.Scale(B,0,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,restoreAfterFinish:true,beforeStartInternal:function(C){Element.makePositioned(C.element.firstChild);if(window.opera){C.element.firstChild.style.top=""}Element.makeClipping(C.element);Element.show(B)},afterUpdateInternal:function(C){C.element.firstChild.style.bottom=(C.originalHeight-C.element.clientHeight)+"px"},afterFinishInternal:function(C){Element.hide(C.element);Element.undoClipping(C.element);Element.undoPositioned(C.element.firstChild);C.element.firstChild.style.bottom=A}},arguments[1]||{}))};Effect.Squish=function(A){return new Effect.Scale(A,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(B){Element.makeClipping(B.element)},afterFinishInternal:function(B){Element.hide(B.element);Element.undoClipping(B.element)}})};Effect.Grow=function(C){C=$(C);var F=arguments[1]||{};var L=Element.getDimensions(C);var R=L.width;var O=L.height;var B=C.style.top;var G=C.style.left;var I=C.style.height;var M=C.style.width;var A=Element.getInlineOpacity(C);var Q=F.direction||"center";var P=F.moveTransition||Effect.Transitions.sinoidal;var H=F.scaleTransition||Effect.Transitions.sinoidal;var J=F.opacityTransition||Effect.Transitions.full;var E,D;var N,K;switch(Q){case"top-left":E=D=N=K=0;break;case"top-right":E=R;D=K=0;N=-R;break;case"bottom-left":E=N=0;D=O;K=-O;break;case"bottom-right":E=R;D=O;N=-R;K=-O;break;case"center":E=R/2;D=O/2;N=-R/2;K=-O/2;break}return new Effect.MoveBy(C,D,E,{duration:0.01,beforeSetup:function(S){Element.hide(S.element);Element.makeClipping(S.element);Element.makePositioned(S.element)},afterFinishInternal:function(S){new Effect.Parallel([new Effect.Opacity(S.element,{sync:true,to:1,from:0,transition:J}),new Effect.MoveBy(S.element,K,N,{sync:true,transition:P}),new Effect.Scale(S.element,100,{scaleMode:{originalHeight:O,originalWidth:R},sync:true,scaleFrom:window.opera?1:0,transition:H,restoreAfterFinish:true})],Object.extend({beforeSetup:function(T){T.effects[0].element.style.height=0;Element.show(T.effects[0].element)},afterFinishInternal:function(V){var U=V.effects[0].element;var T=U.style;Element.undoClipping(U);Element.undoPositioned(U);T.top=B;T.left=G;T.height=I;T.width=R;Element.setInlineOpacity(U,A)}},F))}})};Effect.Shrink=function(J){J=$(J);var O=arguments[1]||{};var C=J.clientWidth;var I=J.clientHeight;var G=J.style.top;var F=J.style.left;var M=J.style.height;var H=J.style.width;var K=Element.getInlineOpacity(J);var L=O.direction||"center";var B=O.moveTransition||Effect.Transitions.sinoidal;var A=O.scaleTransition||Effect.Transitions.sinoidal;var N=O.opacityTransition||Effect.Transitions.none;var E,D;switch(L){case"top-left":E=D=0;break;case"top-right":E=C;D=0;break;case"bottom-left":E=0;D=I;break;case"bottom-right":E=C;D=I;break;case"center":E=C/2;D=I/2;break}return new Effect.Parallel([new Effect.Opacity(J,{sync:true,to:0,from:1,transition:N}),new Effect.Scale(J,window.opera?1:0,{sync:true,transition:A,restoreAfterFinish:true}),new Effect.MoveBy(J,D,E,{sync:true,transition:B})],Object.extend({beforeStartInternal:function(P){Element.makePositioned(P.effects[0].element);Element.makeClipping(P.effects[0].element)},afterFinishInternal:function(R){var Q=R.effects[0].element;var P=Q.style;Element.hide(Q);Element.undoClipping(Q);Element.undoPositioned(Q);P.top=G;P.left=F;P.height=M;P.width=H;Element.setInlineOpacity(Q,K)}},O))};Effect.Pulsate=function(C){C=$(C);var B=arguments[1]||{};var A=Element.getInlineOpacity(C);var E=B.transition||Effect.Transitions.sinoidal;var D=function(F){return E(1-Effect.Transitions.pulse(F))};D.bind(E);return new Effect.Opacity(C,Object.extend(Object.extend({duration:3,from:0,afterFinishInternal:function(F){Element.setInlineOpacity(F.element,A)}},B),{transition:D}))};Effect.Fold=function(A){A=$(A);var E=A.style.top;var C=A.style.left;var D=A.style.width;var B=A.style.height;Element.makeClipping(A);return new Effect.Scale(A,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(F){new Effect.Scale(A,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(G){Element.hide(G.element);Element.undoClipping(G.element);G.element.style.top=E;G.element.style.left=C;G.element.style.width=D;G.element.style.height=B}})}},arguments[1]||{}))};
var Droppables={drops:[],remove:function(A){this.drops=this.drops.reject(function(B){return B.element==A})},add:function(B){B=$(B);var A=Object.extend({greedy:true,hoverclass:null},arguments[1]||{});if(A.containment){A._containers=[];var C=A.containment;if((typeof C=="object")&&(C.constructor==Array)){C.each(function(D){A._containers.push($(D))})}else{A._containers.push($(C))}}Element.makePositioned(B);A.element=B;this.drops.push(A)},isContained:function(C,B){var A=C.parentNode;return B._containers.detect(function(D){return A==D})},isAffected:function(C,B,D,A){return((A.element!=D)&&((!A._containers)||this.isContained(D,A))&&((!A.accept)||(Element.Class.has_any(D,A.accept)))&&Position.within(A.element,C,B))},deactivate:function(A){if(A.hoverclass){Element.Class.remove(A.element,A.hoverclass)}this.last_active=null},activate:function(A){if(this.last_active){this.deactivate(this.last_active)}if(A.hoverclass){Element.Class.add(A.element,A.hoverclass)}this.last_active=A},show:function(F,E){if(!this.drops.length){return }var C=Event.pointerX(F);var B=Event.pointerY(F);Position.prepare();var D=this.drops.length-1;do{var A=this.drops[D];if(this.isAffected(C,B,E,A)){if(A.onHover){A.onHover(E,A.element,Position.overlap(A.overlap,A.element))}if(A.greedy){this.activate(A);return }}}while(D--);if(this.last_active){this.deactivate(this.last_active)}},fire:function(B,A){if(!this.last_active){return }Position.prepare();if(this.isAffected(Event.pointerX(B),Event.pointerY(B),A,this.last_active)){if(this.last_active.onDrop){this.last_active.onDrop(A,this.last_active.element,B)}}},reset:function(){if(this.last_active){this.deactivate(this.last_active)}}};var Draggables={observers:[],addObserver:function(A){this.observers.push(A)},removeObserver:function(A){this.observers=this.observers.reject(function(B){return B.element==A})},notify:function(B,A){this.observers.invoke(B,A)}};var Draggable=Class.create();Draggable.prototype={initialize:function(B){var A=Object.extend({handle:false,starteffect:function(C){new Effect.Opacity(C,{duration:0.2,from:1,to:0.7})},reverteffect:function(E,D,C){var F=Math.sqrt(Math.abs(D^2)+Math.abs(C^2))*0.02;new Effect.MoveBy(E,-D,-C,{duration:F})},endeffect:function(C){new Effect.Opacity(C,{duration:0.2,from:0.7,to:1})},zindex:1000,revert:false},arguments[1]||{});this.element=$(B);if(A.handle&&(typeof A.handle=="string")){this.handle=Element.Class.childrenWith(this.element,A.handle)[0]}if(!this.handle){this.handle=$(A.handle)}if(!this.handle){this.handle=this.element}Element.makePositioned(this.element);this.offsetX=0;this.offsetY=0;this.originalLeft=this.currentLeft();this.originalTop=this.currentTop();this.originalX=this.element.offsetLeft;this.originalY=this.element.offsetTop;this.options=A;this.active=false;this.dragging=false;this.eventMouseDown=this.startDrag.bindAsEventListener(this);this.eventMouseUp=this.endDrag.bindAsEventListener(this);this.eventMouseMove=this.update.bindAsEventListener(this);this.eventKeypress=this.keyPress.bindAsEventListener(this);this.registerEvents()},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown);this.unregisterEvents()},registerEvents:function(){Event.observe(document,"mouseup",this.eventMouseUp);Event.observe(document,"mousemove",this.eventMouseMove);Event.observe(document,"keypress",this.eventKeypress);Event.observe(this.handle,"mousedown",this.eventMouseDown)},unregisterEvents:function(){},currentLeft:function(){return parseInt(this.element.style.left||"0")},currentTop:function(){return parseInt(this.element.style.top||"0")},startDrag:function(B){if(Event.isLeftClick(B)){var D=Event.element(B);if(D.tagName&&(D.tagName=="INPUT"||D.tagName=="SELECT"||D.tagName=="BUTTON"||D.tagName=="TEXTAREA")){return }this.active=true;var C=[Event.pointerX(B),Event.pointerY(B)];var A=Position.cumulativeOffset(this.element);this.offsetX=(C[0]-A[0]);this.offsetY=(C[1]-A[1]);Event.stop(B)}},finishDrag:function(B,C){this.active=false;this.dragging=false;if(this.options.ghosting){Position.relativize(this.element);Element.remove(this._clone);this._clone=null}if(C){Droppables.fire(B,this.element)}Draggables.notify("onEnd",this);var A=this.options.revert;if(A&&typeof A=="function"){A=A(this.element)}if(A&&this.options.reverteffect){this.options.reverteffect(this.element,this.currentTop()-this.originalTop,this.currentLeft()-this.originalLeft)}else{this.originalLeft=this.currentLeft();this.originalTop=this.currentTop()}if(this.originalZ&&this.options.zindex){this.element.style.zIndex=this.originalZ}if(this.options.endeffect){this.options.endeffect(this.element)}Droppables.reset()},keyPress:function(A){if(this.active){if(A.keyCode==Event.KEY_ESC){this.finishDrag(A,false);Event.stop(A)}}},endDrag:function(A){if(this.active&&this.dragging){this.finishDrag(A,true);Event.stop(A)}this.active=false;this.dragging=false},draw:function(C){var D=[Event.pointerX(C),Event.pointerY(C)];var B=Position.cumulativeOffset(this.element);B[0]-=this.currentLeft();B[1]-=this.currentTop();var A=this.element.style;if((!this.options.constraint)||(this.options.constraint=="horizontal")){A.left=(D[0]-B[0]-this.offsetX)+"px"}if((!this.options.constraint)||(this.options.constraint=="vertical")){A.top=(D[1]-B[1]-this.offsetY)+"px"}if(A.visibility=="hidden"){A.visibility=""}},update:function(B){if(this.active){if(!this.dragging){var A=this.element.style;this.dragging=true;if(Element.getStyle(this.element,"position")==""){A.position="relative"}if(this.options.zindex){this.options.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0);A.zIndex=this.options.zindex}if(this.options.ghosting){this._clone=this.element.cloneNode(true);Position.absolutize(this.element);this.element.parentNode.insertBefore(this._clone,this.element)}Draggables.notify("onStart",this);if(this.options.starteffect){this.options.starteffect(this.element)}}Droppables.show(B,this.element);this.draw(B);if(this.options.change){this.options.change(this)}if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0)}Event.stop(B)}}};var SortableObserver=Class.create();SortableObserver.prototype={initialize:function(B,A){this.element=$(B);this.observer=A;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();if(this.lastValue!=Sortable.serialize(this.element)){this.observer(this.element)}}};var Sortable={sortables:new Array(),options:function(A){A=$(A);return this.sortables.detect(function(B){return B.element==A})},destroy:function(A){A=$(A);this.sortables.findAll(function(B){return B.element==A}).each(function(B){Draggables.removeObserver(B.element);B.droppables.each(function(C){Droppables.remove(C)});B.draggables.invoke("destroy")});this.sortables=this.sortables.reject(function(B){return B.element==A})},create:function(C){C=$(C);var B=Object.extend({element:C,tag:"li",dropOnEmpty:false,tree:false,overlap:"vertical",constraint:"vertical",containment:C,handle:false,only:false,hoverclass:null,ghosting:false,format:null,onChange:function(){},onUpdate:function(){}},arguments[1]||{});this.destroy(C);var A={revert:true,ghosting:B.ghosting,constraint:B.constraint,handle:B.handle};if(B.starteffect){A.starteffect=B.starteffect}if(B.reverteffect){A.reverteffect=B.reverteffect}else{if(B.ghosting){A.reverteffect=function(E){E.style.top=0;E.style.left=0}}}if(B.endeffect){A.endeffect=B.endeffect}if(B.zindex){A.zindex=B.zindex}var D={overlap:B.overlap,containment:B.containment,hoverclass:B.hoverclass,onHover:Sortable.onHover,greedy:!B.dropOnEmpty};Element.cleanWhitespace(C);B.draggables=[];B.droppables=[];if(B.dropOnEmpty){Droppables.add(C,{containment:B.containment,onHover:Sortable.onEmptyHover,greedy:false});B.droppables.push(C)}(this.findElements(C,B)||[]).each(function(F){var E=B.handle?Element.Class.childrenWith(F,B.handle)[0]:F;B.draggables.push(new Draggable(F,Object.extend(A,{handle:E})));Droppables.add(F,D);B.droppables.push(F)});this.sortables.push(B);Draggables.addObserver(new SortableObserver(C,B.onUpdate))},findElements:function(B,A){if(!B.hasChildNodes()){return null}var C=[];$A(B.childNodes).each(function(E){if(E.tagName&&E.tagName==A.tag.toUpperCase()&&(!A.only||(Element.Class.has(E,A.only)))){C.push(E)}if(A.tree){var D=this.findElements(E,A);if(D){C.push(D)}}});return(C.length>0?C.flatten():null)},onHover:function(E,D,A){if(A>0.5){Sortable.mark(D,"before");if(D.previousSibling!=E){var B=E.parentNode;E.style.visibility="hidden";D.parentNode.insertBefore(E,D);if(D.parentNode!=B){Sortable.options(B).onChange(E)}Sortable.options(D.parentNode).onChange(E)}}else{Sortable.mark(D,"after");var C=D.nextSibling||null;if(C!=E){var B=E.parentNode;E.style.visibility="hidden";D.parentNode.insertBefore(E,C);if(D.parentNode!=B){Sortable.options(B).onChange(E)}Sortable.options(D.parentNode).onChange(E)}}},onEmptyHover:function(B,A){if(B.parentNode!=A){A.appendChild(B)}},unmark:function(){if(Sortable._marker){Element.hide(Sortable._marker)}},mark:function(B,A){var D=Sortable.options(B.parentNode);if(D&&!D.ghosting){return }if(!Sortable._marker){Sortable._marker=$("dropmarker")||document.createElement("DIV");Element.hide(Sortable._marker);Element.Class.add(Sortable._marker,"dropmarker");Sortable._marker.style.position="absolute";document.getElementsByTagName("body").item(0).appendChild(Sortable._marker)}var C=Position.cumulativeOffset(B);Sortable._marker.style.top=C[1]+"px";if(A=="after"){Sortable._marker.style.top=(C[1]+B.clientHeight)+"px"}Sortable._marker.style.left=C[0]+"px";Element.show(Sortable._marker)},serialize:function(C){C=$(C);var B=this.options(C);var A=Object.extend({tag:B.tag,only:B.only,name:C.id,format:B.format||/^[^_]*_(.*)$/},arguments[1]||{});return $(this.findElements(C,A)||[]).collect(function(D){return(encodeURIComponent(A.name)+"[]="+encodeURIComponent(D.id.match(A.format)?D.id.match(A.format)[1]:""))}).join("&")}};
var Autocompleter={};Autocompleter.Base=function(){};Autocompleter.Base.prototype={baseInitialize:function(B,C,A){this.element=$(B);this.update=$(C);this.hasFocus=false;this.changed=false;this.active=false;this.index=0;this.entryCount=0;if(this.setOptions){this.setOptions(A)}else{this.options=A||{}}this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||function(D,E){if(!E.style.position||E.style.position=="absolute"){E.style.position="absolute";Position.clone(D,E,{setHeight:false,offsetTop:D.offsetHeight})}Effect.Appear(E,{duration:0.15})};this.options.onHide=this.options.onHide||function(D,E){new Effect.Fade(E,{duration:0.15})};if(typeof (this.options.tokens)=="string"){this.options.tokens=new Array(this.options.tokens)}this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keypress",this.onKeyPress.bindAsEventListener(this))},show:function(){if(Element.getStyle(this.update,"display")=="none"){this.options.onShow(this.element,this.update)}if(!this.iefix&&(navigator.appVersion.indexOf("MSIE")>0)&&(Element.getStyle(this.update,"position")=="absolute")){new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');this.iefix=$(this.update.id+"_iefix")}if(this.iefix){setTimeout(this.fixIEOverlapping.bind(this),50)}},fixIEOverlapping:function(){Position.clone(this.update,this.iefix);this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();if(Element.getStyle(this.update,"display")!="none"){this.options.onHide(this.element,this.update)}if(this.iefix){Element.hide(this.iefix)}},startIndicator:function(){if(this.options.indicator){Element.show(this.options.indicator)}},stopIndicator:function(){if(this.options.indicator){Element.hide(this.options.indicator)}},onKeyPress:function(A){if(this.active){switch(A.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(A);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(A);return ;case Event.KEY_LEFT:case Event.KEY_RIGHT:return ;case Event.KEY_UP:this.markPrevious();this.render();if(navigator.appVersion.indexOf("AppleWebKit")>0){Event.stop(A)}return ;case Event.KEY_DOWN:this.markNext();this.render();if(navigator.appVersion.indexOf("AppleWebKit")>0){Event.stop(A)}return }}else{if(A.keyCode==Event.KEY_TAB||A.keyCode==Event.KEY_RETURN){return }}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer)}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000)},onHover:function(B){var A=Event.findElement(B,"LI");if(this.index!=A.autocompleteIndex){this.index=A.autocompleteIndex;this.render()}Event.stop(B)},onClick:function(B){var A=Event.findElement(B,"LI");this.index=A.autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(A){setTimeout(this.hide.bind(this),250);this.hasFocus=false;this.active=false},render:function(){if(this.entryCount>0){for(var A=0;A<this.entryCount;A++){this.index==A?Element.addClassName(this.getEntry(A),"selected"):Element.removeClassName(this.getEntry(A),"selected")}if(this.hasFocus){this.show();this.active=true}}else{this.hide()}},markPrevious:function(){if(this.index>0){this.index--}else{this.index=this.entryCount-1}},markNext:function(){if(this.index<this.entryCount-1){this.index++}else{this.index=0}},getEntry:function(A){return this.update.firstChild.childNodes[A]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry())},updateElement:function(E){if(this.options.updateElement){this.options.updateElement(E);return }var B=Element.collectTextNodesIgnoreClass(E,"informal");var D=this.findLastToken();if(D!=-1){var C=this.element.value.substr(0,D+1);var A=this.element.value.substr(D+1).match(/^\s+/);if(A){C+=A[0]}this.element.value=C+B}else{this.element.value=B}this.element.focus();if(this.options.afterUpdateElement){this.options.afterUpdateElement(this.element,E)}},updateChoices:function(C){if(!this.changed&&this.hasFocus){this.update.innerHTML=C;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.firstChild);if(this.update.firstChild&&this.update.firstChild.childNodes){this.entryCount=this.update.firstChild.childNodes.length;for(var A=0;A<this.entryCount;A++){var B=this.getEntry(A);B.autocompleteIndex=A;this.addObservers(B)}}else{this.entryCount=0}this.stopIndicator();this.index=0;this.render()}},addObservers:function(A){Event.observe(A,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(A,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=false;if(this.getToken().length>=this.options.minChars){this.startIndicator();this.getUpdatedChoices()}else{this.active=false;this.hide()}},getToken:function(){var B=this.findLastToken();if(B!=-1){var A=this.element.value.substr(B+1).replace(/^\s+/,"").replace(/\s+$/,"")}else{var A=this.element.value}return/\n/.test(A)?"":A},findLastToken:function(){var C=-1;for(var B=0;B<this.options.tokens.length;B++){var A=this.element.value.lastIndexOf(this.options.tokens[B]);if(A>C){C=A}}return C}};Ajax.Autocompleter=Class.create();Object.extend(Object.extend(Ajax.Autocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(C,D,B,A){this.baseInitialize(C,D,A);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=B},getUpdatedChoices:function(){entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry;if(this.options.defaultParams){this.options.parameters+="&"+this.options.defaultParams}new Ajax.Request(this.url,this.options)},onComplete:function(A){this.updateChoices(A.responseText)}});Autocompleter.Local=Class.create();Autocompleter.Local.prototype=Object.extend(new Autocompleter.Base(),{initialize:function(B,D,C,A){this.baseInitialize(B,D,A);this.options.array=C},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(A){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(B){var D=[];var C=[];var H=B.getToken();var G=0;for(var E=0;E<B.options.array.length&&D.length<B.options.choices;E++){var F=B.options.array[E];var I=B.options.ignoreCase?F.toLowerCase().indexOf(H.toLowerCase()):F.indexOf(H);while(I!=-1){if(I==0&&F.length!=H.length){D.push("<li><strong>"+F.substr(0,H.length)+"</strong>"+F.substr(H.length)+"</li>");break}else{if(H.length>=B.options.partialChars&&B.options.partialSearch&&I!=-1){if(B.options.fullSearch||/\s/.test(F.substr(I-1,1))){C.push("<li>"+F.substr(0,I)+"<strong>"+F.substr(I,H.length)+"</strong>"+F.substr(I+H.length)+"</li>");break}}}I=B.options.ignoreCase?F.toLowerCase().indexOf(H.toLowerCase(),I+1):F.indexOf(H,I+1)}}if(C.length){D=D.concat(C.slice(0,B.options.choices-D.length))}return"<ul>"+D.join("")+"</ul>"}},A||{})}});Ajax.InPlaceEditor=Class.create();Ajax.InPlaceEditor.defaultHighlightColor="#FFFF99";Ajax.InPlaceEditor.prototype={initialize:function(C,B,A){this.url=B;this.element=$(C);this.options=Object.extend({okText:"ok",cancelText:"cancel",savingText:"Saving...",clickToEditText:"Click to edit",okText:"ok",rows:1,onComplete:function(E,D){new Effect.Highlight(D,{startcolor:this.options.highlightcolor})},onFailure:function(D){alert("Error communicating with the server: "+D.responseText.stripTags())},callback:function(D){return Form.serialize(D)},handleLineBreaks:true,loadingText:"Loading...",savingClassName:"inplaceeditor-saving",loadingClassName:"inplaceeditor-loading",formClassName:"inplaceeditor-form",highlightcolor:Ajax.InPlaceEditor.defaultHighlightColor,highlightendcolor:"#FFFFFF",externalControl:null,ajaxOptions:{}},A||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId)){this.options.formId=null}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl)}this.originalBackground=Element.getStyle(this.element,"background-color");if(!this.originalBackground){this.originalBackground="transparent"}this.element.title=this.options.clickToEditText;this.onclickListener=this.enterEditMode.bindAsEventListener(this);this.mouseoverListener=this.enterHover.bindAsEventListener(this);this.mouseoutListener=this.leaveHover.bindAsEventListener(this);Event.observe(this.element,"click",this.onclickListener);Event.observe(this.element,"mouseover",this.mouseoverListener);Event.observe(this.element,"mouseout",this.mouseoutListener);if(this.options.externalControl){Event.observe(this.options.externalControl,"click",this.onclickListener);Event.observe(this.options.externalControl,"mouseover",this.mouseoverListener);Event.observe(this.options.externalControl,"mouseout",this.mouseoutListener)}},enterEditMode:function(){if(this.saving){return }if(this.editing){return }this.editing=true;this.onEnterEditMode();if(this.options.externalControl){Element.hide(this.options.externalControl)}Element.hide(this.element);this.createForm();this.element.parentNode.insertBefore(this.form,this.element);Field.focus(this.editField);if(arguments.length>1){Event.stop(arguments[0])}},createForm:function(){this.form=document.createElement("form");this.form.id=this.options.formId;Element.addClassName(this.form,this.options.formClassName);this.form.onsubmit=this.onSubmit.bind(this);this.createEditField();if(this.options.textarea){var A=document.createElement("br");this.form.appendChild(A)}okButton=document.createElement("input");okButton.type="submit";okButton.value=this.options.okText;this.form.appendChild(okButton);cancelLink=document.createElement("a");cancelLink.href="#";cancelLink.appendChild(document.createTextNode(this.options.cancelText));cancelLink.onclick=this.onclickCancel.bind(this);this.form.appendChild(cancelLink)},hasHTMLLineBreaks:function(A){if(!this.options.handleLineBreaks){return false}return A.match(/<br/i)||A.match(/<p>/i)},convertHTMLLineBreaks:function(A){return A.replace(/<br>/gi,"\n").replace(/<br\/>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<p>/gi,"")},createEditField:function(){var D;if(this.options.loadTextURL){D=this.options.loadingText}else{D=this.getText()}if(this.options.rows==1&&!this.hasHTMLLineBreaks(D)){this.options.textarea=false;var A=document.createElement("input");A.type="text";A.name="value";A.value=D;A.style.backgroundColor=this.options.highlightcolor;var B=this.options.size||this.options.cols||0;if(B!=0){A.size=B}this.editField=A}else{this.options.textarea=true;var C=document.createElement("textarea");C.name="value";C.value=this.convertHTMLLineBreaks(D);C.rows=this.options.rows;C.cols=this.options.cols||40;this.editField=C}if(this.options.loadTextURL){this.loadExternalText()}this.form.appendChild(this.editField)},getText:function(){return this.element.innerHTML},loadExternalText:function(){Element.addClassName(this.form,this.options.loadingClassName);this.editField.disabled=true;new Ajax.Request(this.options.loadTextURL,Object.extend({asynchronous:true,onComplete:this.onLoadedExternalText.bind(this)},this.options.ajaxOptions))},onLoadedExternalText:function(A){Element.removeClassName(this.form,this.options.loadingClassName);this.editField.disabled=false;this.editField.value=A.responseText.stripTags()},onclickCancel:function(){this.onComplete();this.leaveEditMode();return false},onFailure:function(A){this.options.onFailure(A);if(this.oldInnerHTML){this.element.innerHTML=this.oldInnerHTML;this.oldInnerHTML=null}return false},onSubmit:function(){var A=this.form;var B=this.editField.value;this.onLoading();new Ajax.Updater({success:this.element,failure:null},this.url,Object.extend({parameters:this.options.callback(A,B),onComplete:this.onComplete.bind(this),onFailure:this.onFailure.bind(this)},this.options.ajaxOptions));if(arguments.length>1){Event.stop(arguments[0])}return false},onLoading:function(){this.saving=true;this.removeForm();this.leaveHover();this.showSaving()},showSaving:function(){this.oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;Element.addClassName(this.element,this.options.savingClassName);this.element.style.backgroundColor=this.originalBackground;Element.show(this.element)},removeForm:function(){if(this.form){if(this.form.parentNode){Element.remove(this.form)}this.form=null}},enterHover:function(){if(this.saving){return }this.element.style.backgroundColor=this.options.highlightcolor;if(this.effect){this.effect.cancel()}Element.addClassName(this.element,this.options.hoverClassName)},leaveHover:function(){if(this.options.backgroundColor){this.element.style.backgroundColor=this.oldBackground}Element.removeClassName(this.element,this.options.hoverClassName);if(this.saving){return }this.effect=new Effect.Highlight(this.element,{startcolor:this.options.highlightcolor,endcolor:this.options.highlightendcolor,restorecolor:this.originalBackground})},leaveEditMode:function(){Element.removeClassName(this.element,this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this.originalBackground;Element.show(this.element);if(this.options.externalControl){Element.show(this.options.externalControl)}this.editing=false;this.saving=false;this.oldInnerHTML=null;this.onLeaveEditMode()},onComplete:function(A){this.leaveEditMode();this.options.onComplete.bind(this)(A,this.element)},onEnterEditMode:function(){},onLeaveEditMode:function(){},dispose:function(){if(this.oldInnerHTML){this.element.innerHTML=this.oldInnerHTML}this.leaveEditMode();Event.stopObserving(this.element,"click",this.onclickListener);Event.stopObserving(this.element,"mouseover",this.mouseoverListener);Event.stopObserving(this.element,"mouseout",this.mouseoutListener);if(this.options.externalControl){Event.stopObserving(this.options.externalControl,"click",this.onclickListener);Event.stopObserving(this.options.externalControl,"mouseover",this.mouseoverListener);Event.stopObserving(this.options.externalControl,"mouseout",this.mouseoutListener)}}};
Object.debug=function(B){var A=[];if(typeof B in ["string","number"]){return B}else{for(property in B){if(typeof B[property]!="function"){A.push(property+" => "+(typeof B[property]=="string"?'"'+B[property]+'"':B[property]))}}}return("'"+B+"' #"+typeof B+": {"+A.join(", ")+"}")};String.prototype.toArray=function(){var B=[];for(var A=0;A<this.length;A++){B.push(this.charAt(A))}return B};var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(A){A=A.toUpperCase();var E=this.NODEMAP[A]||"div";var B=document.createElement(E);B.innerHTML="<"+A+"></"+A+">";var D=B.firstChild||null;if(D&&(D.tagName!=A)){D=D.getElementsByTagName(A)[0]}if(!D){D=document.createElement(A)}if(!D){return }if(arguments[1]){if(this._isStringOrNumber(arguments[1])||(arguments[1] instanceof Array)){this._children(D,arguments[1])}else{var C=this._attributes(arguments[1]);if(C.length){B.innerHTML="<"+A+" "+C+"></"+A+">";D=B.firstChild||null;if(!D){D=document.createElement(A);for(attr in arguments[1]){D[attr=="class"?"className":attr]=arguments[1][attr]}}if(D.tagName!=A){D=B.getElementsByTagName(A)[0]}}}}if(arguments[2]){this._children(D,arguments[2])}return D},_text:function(A){return document.createTextNode(A)},_attributes:function(A){var B=[];for(attribute in A){B.push((attribute=="className"?"class":attribute)+'="'+A[attribute].toString().escapeHTML()+'"')}return B.join(" ")},_children:function(B,A){if(typeof A=="object"){A.flatten().each(function(C){if(typeof C=="object"){B.appendChild(C)}else{if(Builder._isStringOrNumber(C)){B.appendChild(Builder._text(C))}}})}else{if(Builder._isStringOrNumber(A)){B.appendChild(Builder._text(A))}}},_isStringOrNumber:function(A){return(typeof A=="string"||typeof A=="number")}};String.prototype.camelize=function(){var D=this.split("-");if(D.length==1){return D[0]}var B=this.indexOf("-")==0?D[0].charAt(0).toUpperCase()+D[0].substring(1):D[0];for(var C=1,A=D.length;C<A;C++){var E=D[C];B+=E.charAt(0).toUpperCase()+E.substring(1)}return B};Element.getStyle=function(B,C){B=$(B);var D=B.style[C.camelize()];if(!D){if(document.defaultView&&document.defaultView.getComputedStyle){var A=document.defaultView.getComputedStyle(B,null);D=(A!=null)?A.getPropertyValue(C):null}else{if(B.currentStyle){D=B.currentStyle[C.camelize()]}}}if(window.opera&&(C=="left"||C=="top"||C=="right"||C=="bottom")){if(Element.getStyle(B,"position")=="static"){D="auto"}}if(D=="auto"){D=null}return D};String.prototype.parseColor=function(){color="#";if(this.slice(0,4)=="rgb("){var B=this.slice(4,this.length-1).split(",");var A=0;do{color+=parseInt(B[A]).toColorPart()}while(++A<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var A=1;A<4;A++){color+=(this.charAt(A)+this.charAt(A)).toLowerCase()}}if(this.length==7){color=this.toLowerCase()}}}return(color.length==7?color:(arguments[0]||this))};Element.makePositioned=function(A){A=$(A);var B=Element.getStyle(A,"position");if(B=="static"||!B){A._madePositioned=true;A.style.position="relative";if(window.opera){A.style.top=0;A.style.left=0}}};Element.undoPositioned=function(A){A=$(A);if(typeof A._madePositioned!="undefined"){A._madePositioned=undefined;A.style.position="";A.style.top="";A.style.left="";A.style.bottom="";A.style.right=""}};Element.makeClipping=function(A){A=$(A);if(typeof A._overflow!="undefined"){return }A._overflow=A.style.overflow;if((Element.getStyle(A,"overflow")||"visible")!="hidden"){A.style.overflow="hidden"}};Element.undoClipping=function(A){A=$(A);if(typeof A._overflow=="undefined"){return }A.style.overflow=A._overflow;A._overflow=undefined};Element.collectTextNodesIgnoreClass=function(D,E){var C=$(D).childNodes;var F="";var B=new RegExp("^([^ ]+ )*"+E+"( [^ ]+)*$","i");for(var A=0;A<C.length;A++){if(C[A].nodeType==3){F+=C[A].nodeValue}else{if((!C[A].className.match(B))&&C[A].hasChildNodes()){F+=Element.collectTextNodesIgnoreClass(C[A],E)}}}return F};Element.setContentZoom=function(A,B){A=$(A);A.style.fontSize=(B/100)+"em";if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0)}};Element.getOpacity=function(B){var A;if(A=Element.getStyle(B,"opacity")){return parseFloat(A)}if(A=(Element.getStyle(B,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(A[1]){return parseFloat(A[1])/100}}return 1};Element.setOpacity=function(B,C){B=$(B);var A=B.style;if(C==1){A.opacity="0.999999";if(/MSIE/.test(navigator.userAgent)){A.filter=Element.getStyle(B,"filter").replace(/alpha\([^\)]*\)/gi,"")}}else{if(C<0.00001){C=0}A.opacity=C;if(/MSIE/.test(navigator.userAgent)){A.filter=Element.getStyle(B,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+C*100+")"}}};Element.getInlineOpacity=function(A){A=$(A);var B;B=A.style.opacity;if(typeof B!="undefined"&&B!=""){return B}return""};Element.setInlineOpacity=function(B,C){B=$(B);var A=B.style;A.opacity=C};Element.getDimensions=function(B){B=$(B);if(Element.getStyle(B,"display")=="none"){var A=B.style;var E=A.visibility;var C=A.position;A.visibility="hidden";A.position="absolute";A.display="";var F=B.clientWidth;var D=B.clientHeight;A.display="none";A.position=C;A.visibility=E;return{width:F,height:D}}return{width:B.offsetWidth,height:B.offsetHeight}};Position.positionedOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent;if(B){p=Element.getStyle(B,"position");if(p=="relative"||p=="absolute"){break}}}while(B);return[C,A]};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){Position.cumulativeOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body){if(Element.getStyle(B,"position")=="absolute"){break}}B=B.offsetParent}while(B);return[C,A]}}Position.page=function(D){var A=0,C=0;var B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body){if(Element.getStyle(B,"position")=="absolute"){break}}}while(B=B.offsetParent);B=D;do{A-=B.scrollTop||0;C-=B.scrollLeft||0}while(B=B.parentNode);return[C,A]};Position.offsetParent=function(A){if(A.offsetParent){return A.offsetParent}if(A==document.body){return A}while((A=A.parentNode)&&A!=document.body){if(Element.getStyle(A,"position")!="static"){return A}}return document.body};Position.clone=function(C,E){var A=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});C=$(C);var D=Position.page(C);E=$(E);var F=[0,0];var B=null;if(Element.getStyle(E,"position")=="absolute"){B=Position.offsetParent(E);F=Position.page(B)}if(B==document.body){F[0]-=document.body.offsetLeft;F[1]-=document.body.offsetTop}if(A.setLeft){E.style.left=(D[0]-F[0]+A.offsetLeft)+"px"}if(A.setTop){E.style.top=(D[1]-F[1]+A.offsetTop)+"px"}if(A.setWidth){E.style.width=C.offsetWidth+"px"}if(A.setHeight){E.style.height=C.offsetHeight+"px"}};Position.absolutize=function(B){B=$(B);if(B.style.position=="absolute"){return }Position.prepare();var D=Position.positionedOffset(B);var F=D[1];var E=D[0];var C=B.clientWidth;var A=B.clientHeight;B._originalLeft=E-parseFloat(B.style.left||0);B._originalTop=F-parseFloat(B.style.top||0);B._originalWidth=B.style.width;B._originalHeight=B.style.height;B.style.position="absolute";B.style.top=F+"px";B.style.left=E+"px";B.style.width=C+"px";B.style.height=A+"px"};Position.relativize=function(A){A=$(A);if(A.style.position=="relative"){return }Position.prepare();A.style.position="relative";var C=parseFloat(A.style.top||0)-(A._originalTop||0);var B=parseFloat(A.style.left||0)-(A._originalLeft||0);A.style.top=C+"px";A.style.left=B+"px";A.style.height=A._originalHeight;A.style.width=A._originalWidth};Element.Class={toggle:function(A,B){if(Element.Class.has(A,B)){Element.Class.remove(A,B);if(arguments.length==3){Element.Class.add(A,arguments[2])}}else{Element.Class.add(A,B);if(arguments.length==3){Element.Class.remove(A,arguments[2])}}},get:function(A){return $(A).className.split(" ")},remove:function(B){B=$(B);var A=arguments;$R(1,arguments.length-1).each(function(C){B.className=B.className.split(" ").reject(function(D){return(D==A[C])}).join(" ")})},add:function(B){B=$(B);for(var A=1;A<arguments.length;A++){Element.Class.remove(B,arguments[A]);B.className+=(B.className.length>0?" ":"")+arguments[A]}},has:function(C){C=$(C);if(!C||!C.className){return false}var D;for(var B=1;B<arguments.length;B++){if((typeof arguments[B]=="object")&&(arguments[B].constructor==Array)){for(var A=0;A<arguments[B].length;A++){D=new RegExp("(^|\\s)"+arguments[B][A]+"(\\s|$)");if(!D.test(C.className)){return false}}}else{D=new RegExp("(^|\\s)"+arguments[B]+"(\\s|$)");if(!D.test(C.className)){return false}}}return true},has_any:function(C){C=$(C);if(!C||!C.className){return false}var D;for(var B=1;B<arguments.length;B++){if((typeof arguments[B]=="object")&&(arguments[B].constructor==Array)){for(var A=0;A<arguments[B].length;A++){D=new RegExp("(^|\\s)"+arguments[B][A]+"(\\s|$)");if(D.test(C.className)){return true}}}else{D=new RegExp("(^|\\s)"+arguments[B]+"(\\s|$)");if(D.test(C.className)){return true}}}return false},childrenWith:function(C,D){var B=$(C).getElementsByTagName("*");var E=new Array();for(var A=0;A<B.length;A++){if(Element.Class.has(B[A],D)){E.push(B[A])}}return E}};
